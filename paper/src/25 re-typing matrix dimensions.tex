\section{Re-typing Matrix Dimensions}

When constructing matroids, we often need to convert a block matrix whose blocks are indexed by disjoint sets into a matrix indexed by unions of those index sets. Although the contents of the matrix stay the same, both its dimensions change their type from a \texttt{Sum} of sets to a \texttt{Set} union of those sets. To this end, we implemented
\begin{leancode}
def Subtype.toSum {α : Type*} {X Y : Set α}
    [∀ a, Decidable (a ∈ X)]
    [∀ a, Decidable (a ∈ Y)]
    (i : (X ∪ Y).Elem) :
    X.Elem ⊕ Y.Elem :=
  if hiX : i.val ∈ X then Sum.inl ⟨i, hiX⟩ else
  if hiY : i.val ∈ Y then Sum.inr ⟨i, hiY⟩ else
  (i.property.elim hiX hiY).elim
\end{leancode}
This allows us to re-type matrix dimensions and thus define the matrix transformation \texttt{Matrix.toMatrixUnionUnion} so that \texttt{A.toMatrixUnionUnion i j = A i.toSum j.toSum}.

We also define a function \texttt{Matrix.toMatrixElemElem} with API that greatly simplifies some proofs where extensive work with matrices constructed by \texttt{Matrix.toMatrixUnionUnion} is necessary, but \texttt{Matrix.toMatrixElemElem} is not a part of the trusted code.
